<?php

use App\Models\User;

Route::get('/demo', function () {
    // $data = [
    //     ['email' => 'awi_mail@rocketmail.com'],
    //     ['email' => 'ns.agunherahmawan@gmail.com'],
    //     ['email' => 'donsatriawan@gmail.com'],
    //     ['email' => 'Lfirahma@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'drg.rizah@yahoo.com'],
    //     ['email' => 'anita.nur81@ui.ac.id'],
    //     ['email' => 'desary01@yahoo.com'],
    //     ['email' => 'rematikarohmasari@gmail.com'],
    //     ['email' => 'riallizanuryana@gmail.com'],
    //     ['email' => 'nandarifqiansyah2@gmail.com'],
    //     ['email' => 'dikiariefpp25@gmail.com'],
    //     ['email' => 'wsusi201@gmail.com'],
    //     ['email' => 'aulia@penta.co.id'],
    //     ['email' => 'arwanda.aries@gmail.com'],
    //     ['email' => 'ajipangestu38502@gmail.com'],
    //     ['email' => 'isyawara2@gmail.com'],
    //     ['email' => 'niekniezz@gmail.com'],
    //     ['email' => 'hadiwiryanto688@gmail.com'],
    //     ['email' => 'ichwan.one@gmail.com'],
    //     ['email' => 'diniiiwl@gmail.com'],
    //     ['email' => 'sungkaanrahayu@gmail.com'],
    //     ['email' => 'dewiku2010@gmail.com'],
    //     ['email' => 'anna12071986@gmail.com'],
    //     ['email' => 'kharisma.rosa@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => '#N/A'],
    //     ['email' => 'dewirintawati086@gmail.com'],
    //     ['email' => 'myulsi70@gmail.com'],
    //     ['email' => 'burhan.tsaqiif@gmail.com'],
    //     ['email' => 'devesilet@gemail.com'],
    //     ['email' => 'condrosupono@gmail.com'],
    //     ['email' => 'fariddwiadrian@gmail.com'],
    //     ['email' => 'sobarimohammad@gmail.com'],
    //     ['email' => 'lisindrayatibalikpapan@gmail.com'],
    //     ['email' => 'apt.dhika@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'ali.shapta@gmail.com'],
    //     ['email' => 'revitadeborah@yahoo.com'],
    //     ['email' => 'nhaeda913@gmail.com'],
    //     ['email' => 'margarethastefanus@gmail.com'],
    //     ['email' => 'darulmaulanaa@gmail.com'],
    //     ['email' => 'nedi.aswadi@siloamhospitals.com'],
    //     ['email' => 'slametasruhi@gmail.com'],
    //     ['email' => 'ridha@poltekkesdepkes-sby.ac.id'],
    //     ['email' => 'witriyani2005@gmail.com'],
    //     ['email' => 'elvianissyukur@ymail.com'],
    //     ['email' => 'risky.irda@gmail.com'],
    //     ['email' => 'bambangofm@gmail.com'],
    //     ['email' => 'ivanakristanto12@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'safitrianisah@yahoo.com'],
    //     ['email' => 'rohanissyatta@gmail.com'],
    //     ['email' => 'fahriari4@gmail.com'],
    //     ['email' => 'achmadsyafaat60@gmail.com'],
    //     ['email' => 'kadafiiqbal9416@gmail.com'],
    //     ['email' => 'mahmudanestesi@ugm.ac.id'],
    //     ['email' => 'pujirahayupurwanti@gmail.com'],
    //     ['email' => 'apolosjawadi17@gmail.com'],
    //     ['email' => 'dokmha@gmail.com'],
    //     ['email' => 'arsihyuni087@gmail.com'],
    //     ['email' => 'ktian969@gmail.com'],
    //     ['email' => 'hadi_innova@yahoo.com.au'],
    //     ['email' => 'bruryapriadi@gmail.com'],
    //     ['email' => 'p22030119006@poltekkesjkt2.ac.id'],
    //     ['email' => 'handaru.soewarsono@mayapadahospital.com'],
    //     ['email' => 'bisnis.jaya2014@gmail.com'],
    //     ['email' => 'sw.nindyah@gmail.com'],
    //     ['email' => 'retnaningtyasrhy@gmail.com'],
    //     ['email' => 'heidymichiko@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'resturifaldi077@gmail.com'],
    //     ['email' => 'nikoputra4888@gmail.com'],
    //     ['email' => 'mansyur_din@ymail.com'],
    //     ['email' => 'husnulshafa@gmail.com'],
    //     ['email' => 'rahmasepti76@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'dorkasaja@gmail.com'],
    //     ['email' => 'wennylauren9290@gmail.com'],
    //     ['email' => 'dion.romodon@gmail.com'],
    //     ['email' => 'rreskantika@gmail.com'],
    //     ['email' => 'robb74sinurat@gmail.com'],
    //     ['email' => 'hardi.hutauruk@gmail.com'],
    //     ['email' => 'sigitjiwandono24@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'sugengwidodo4429@gmail.com'],
    //     ['email' => 'adindavirginda1999@gmail.com'],
    //     ['email' => 'tugukojadiklat@gmail.com'],
    //     ['email' => 'dilla.anggraeni@gmail.com'],
    //     ['email' => 'muhammad.darmansyah993@gmail.com'],
    //     ['email' => 'irfantam24@gmail.com'],
    //     ['email' => 'yan_x1985@yahoo.com'],
    //     ['email' => 'deni.respira@gmail.com'],
    //     ['email' => 'adzkaulinnuhaaa@gmail.com'],
    //     ['email' => 'ade.fatriadi.adli@gmail.com'],
    //     ['email' => 'lidiafebrina10@gmail.com'],
    //     ['email' => 'judya.sukmana@hangtuah.ac.id'],
    //     ['email' => 'h.hendryagus@gmail.com'],
    //     ['email' => 'lusia.rubi@gmail.com'],
    //     ['email' => 'fatrakurniawan@yahoo.com'],
    //     ['email' => 'luthfiaswin@gmail.com'],
    //     ['email' => 'amatsolikhin97@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'p22030119014@poltekkesjkt2.ac.id'],
    //     ['email' => 'espee6886@gmail.com'],
    //     ['email' => 'adityamochamad1007@gmail.com'],
    //     ['email' => 'irene.kusrini@gmail.com'],
    //     ['email' => 'lintangsukmakasali1906@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'miaeleza28@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => '#N/A'],
    //     ['email' => 'p22030119009@poltekkesjkt2.ac.id'],
    //     ['email' => 'hendra_winardi@yahoo.com'],
    //     ['email' => 'dandidefri6@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'nafsifr@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => '#N/A'],
    //     ['email' => 'mutiavalentisa@gmail.com'],
    //     ['email' => 'aswad.abi@gmail.com'],
    //     ['email' => 'iqbalchiqal@gmail.com'],
    //     ['email' => 'caener@gmail.com'],
    //     ['email' => 'renggarhumas@gmail.com'],
    //     ['email' => 'elisabeth.juniharta@gmail.com'],
    //     ['email' => 'kolibhadi35@gmail.com'],
    //     ['email' => 'rullystmt@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'marchoferdiansalim@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'abdurrahman.sidiqq@gmail.com'],
    //     ['email' => 'diahayu_tly2k@yahoo.com'],
    //     ['email' => 'diaznovera@gmail.com'],
    //     ['email' => 'nadaasafaa@gmail.com'],
    //     ['email' => 'naurahsaif@gmail.com'],
    //     ['email' => 'karnoto69@elektro.undip.ac.id'],
    //     ['email' => 'linx.rahman@gmail.com'],
    //     ['email' => 'admin@rskiasadewa.co.id'],
    //     ['email' => 'handayani@rsmmc.co.id'],
    //     ['email' => 'suhardiws@gmail.com'],
    //     ['email' => 'sesiliafransiskamd@gmail.com'],
    //     ['email' => 'anisajuli3@gmail.com'],
    //     ['email' => 'shantifadillahmulyana@gmail.com'],
    //     ['email' => 'dr.alfiaturrizki@yahoo.com'],
    //     ['email' => '#N/A'],
    //     ['email' => '#N/A'],
    //     ['email' => '#N/A'],
    //     ['email' => 'kmasykur2@yahoo.com'],
    //     ['email' => 'sdmyarsisimpang4@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'gerrycaesario11@gmail.com'],
    //     ['email' => 'soetrasno16@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'albert22042000@gmail.com'],
    //     ['email' => 'fardinabagus97@gmail.com'],
    //     ['email' => 'davidaja.dv@gmail.com'],
    //     ['email' => 'ervabio29@gmail.com'],
    //     ['email' => 'afifahkhulayfah@gmail.com'],
    //     ['email' => 'mchairulumam34@gmail.com'],
    //     ['email' => 'oripuma@gmail.com'],
    //     ['email' => 'Sfonda02@gmail.com'],
    //     ['email' => 'irvandadi.se@gmail.com'],
    //     ['email' => 'e_robby@outlook.com'],
    //     ['email' => 'onny_sast@yahoo.com.sg'],
    //     ['email' => 'anangmur@yahoo.co.id'],
    //     ['email' => 'mahfudrsb2@gmail.com'],
    //     ['email' => 'raisaramadhinaaa@gmail.com'],
    //     ['email' => 'patriziajihan05@gmail.com'],
    //     ['email' => 'p22030119029@poltekkesjkt2.ac.id'],
    //     ['email' => 'herubs5@gmail.com'],
    //     ['email' => 'tessaadriansyah2013@gmail.com'],
    //     ['email' => 'entiarnas8@gmail.com'],
    //     ['email' => 'arifjokowuryanto@gmail.com'],
    //     ['email' => 'asepnana077@gmail.com'],
    //     ['email' => 'edyirfan11@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'rahmat.iznaini@uin-alauddin.ac.id'],
    //     ['email' => 'forzaarie04@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => '#N/A'],
    //     ['email' => 'dbs.cybermail02@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'k3rsjabar@gmail.com'],
    //     ['email' => 'sufriadi.mhmd@gmail.com'],
    //     ['email' => 'safarihasan81@gmail.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'indriaty27@gmail.com'],
    //     ['email' => 'bayu2009@gmail.com'],
    //     ['email' => 'ekkaeliya@gmail.com'],
    //     ['email' => 'novita.serliana@yahoo.com'],
    //     ['email' => '#N/A'],
    //     ['email' => 'hptwinsbrother@yahoo.co.id'],
    //     ['email' => 'achmadreza8@gmail.com'],
    //     ['email' => 'nainggolanrosida05@gmail.com'],
    //     ['email' => 'sandra.aldrey1@gmail.com'],
    //     ['email' => 'mycap35@gmail.com'],
    //     ['email' => 'kellyanggoro@gmail.com'],
    //     ['email' => 'budinorcito@gmail.com'],
    //     ['email' => 'suwastiko@gmail.com'],
    //     ['email' => 'aquillarahmat@gmail.com'],
    //     ['email' => 'aquillarahmat@gmail.com'],
    // ];

    $client = new \GuzzleHttp\Client();
    $requestApi = $client->get('https://json.extendsclass.com/bin/89470a930f58');
    $result = $requestApi->getBody();
    $data = json_decode($result);

    $dataFiltered = [];
    foreach ($data as $item) {
        $user = User::where('email', $item->email)->first();
        array_push($dataFiltered, ['email' => $item->email, 'referral' => optional($user)->referral ?: '-']);
    }
    return $dataFiltered;
});
